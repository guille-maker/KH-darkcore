<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FogCore - Noticias de Videojuegos</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/noticias.css">
    <style></style>
</head>
<body>
         <header style="background: #222; color: #000000; padding: 10px;">
            <nav style="border: none; box-shadow: none; text-align: center;">
                <ul class="navbar">
                    <li><img src="css/sora1.png" alt="Sora" style="width: 80px;"></li>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="noticias.html">News</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
    </header>

    <main>
        <section class="news-section" id="news">
            <h2 class="news-title">NOTICIAS DE VIDEOJUEGOS</h2>
            
            <div class="news-filter">
                <button class="filter-btn active" data-filter="all">Todas</button>
                <button class="filter-btn" data-filter="api">De la API</button>
                <button class="filter-btn" data-filter="own">Mis Noticias</button>
            </div>
            
            <div class="news-grid" id="news-container">
                <!-- Las noticias se cargar√°n aqu√≠ -->
                <div class="loading">Cargando noticias...</div>
            </div>
            
            <div class="add-news-form">
                <h3 class="form-title">A√ëADIR NUEVA NOTICIA</h3>
                <form id="news-form">
                    <div class="form-group">
                        <label for="news-title" class="form-label">T√≠tulo</label>
                        <input type="text" class="form-control" id="news-title" required>
                    </div>
                    <div class="form-group">
                        <label for="news-excerpt" class="form-label">Resumen</label>
                        <textarea class="form-control" id="news-excerpt" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="news-image" class="form-label">URL de la imagen</label>
                        <input type="url" class="form-control" id="news-image" placeholder="https://ejemplo.com/imagen.jpg">
                    </div>
                    <button type="submit" class="btn btn-primary">Publicar Noticia</button>
                </form>
            </div>
        </section>
    </main>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
   <script>
    // Datos de ejemplo para noticias propias
    const ownNews = [
        {
            id: 1,
            title: "FogCore anuncia colaboraci√≥n exclusiva con desarrolladores indie",
            excerpt: "Nuestra plataforma se asociar√° con 5 estudios indie para traer contenido exclusivo durante los pr√≥ximos meses.",
            image: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            date: "2023-10-15",
            source: "own"
        },
        {
            id: 2,
            title: "An√°lisis exclusivo: Cyberpunk 2077 Phantom Liberty",
            excerpt: "Hemos tenido acceso anticipado a la expansi√≥n y te contamos todo lo que necesitas saber.",
            image: "https://images.unsplash.com/photo-1552820728-8b83bb6b773f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            date: "2023-09-28",
            source: "own"
        }
    ];

    // API REAL - GamerPower (gratuita, no necesita API key)
    async function fetchNewsFromAPI() {
        try {
            console.log('üîç Buscando noticias de GamerPower...');
            const response = await fetch('https://www.gamerpower.com/api/giveaways?type=game&platform=pc');
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const data = await response.json();
            console.log('‚úÖ Noticias recibidas:', data.length);
            
            return data.slice(0, 4).map(item => ({
                id: `api-${item.id}`,
                title: item.title.length > 50 ? item.title.substring(0, 50) + '...' : item.title,
                excerpt: 'üéÆ Oferta especial disponible por tiempo limitado',
                image: item.thumbnail || 'https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                date: new Date().toISOString().split('T')[0],
                source: 'api',
                type: 'giveaway',
                url: item.open_giveaway_url
            }));
        } catch (error) {
            console.error('‚ùå Error fetching from API:', error);
            // Noticias de respaldo
            return getFallbackNews();
        }
    }

    function getFallbackNews() {
        return [
            {
                id: 101,
                title: "Nintendo anuncia nueva consola para 2024",
                excerpt: "La compa√±√≠a japonesa ha confirmado el desarrollo de su siguiente plataforma de gaming.",
                image: "https://images.unsplash.com/photo-1606144042614-b2417e99c4e3?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                date: "2023-10-20",
                source: "api"
            },
            {
                id: 102,
                title: "PlayStation anuncia grandes descuentos para miembros Plus",
                excerpt: "M√°s de 20 juegos con hasta 70% de descuento disponibles este mes.",
                image: "https://images.unsplash.com/photo-1606813907291-d86efa9b94db?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                date: "2023-10-18",
                source: "api"
            }
        ];
    }

    // Funci√≥n para renderizar noticias (mejorada)
    function renderNews(news) {
        const container = document.getElementById('news-container');
        
        if (news.length === 0) {
            container.innerHTML = '<div class="no-news">No hay noticias para mostrar</div>';
            return;
        }
        
        container.innerHTML = news.map(item => `
            <div class="news-card" data-source="${item.source}">
                <img src="${item.image}" alt="${item.title}" class="news-image" 
                     onerror="this.src='https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80'">
                <div class="news-content">
                    <span class="news-source ${item.source}">${item.source === 'api' ? 'üéÆ API' : '‚≠ê Propia'}</span>
                    <h3 class="news-title-card">${item.title}</h3>
                    <div class="news-date">${formatDate(item.date)}</div>
                    <p class="news-excerpt">${item.excerpt}</p>
                    ${item.url ? 
                        `<a href="${item.url}" target="_blank" class="read-more">Ver oferta ‚Üí</a>` : 
                        `<a href="#" class="read-more">Leer m√°s ‚Üí</a>`
                    }
                </div>
            </div>
        `).join('');
    }

    // Funci√≥n para formatear fechas
    function formatDate(dateString) {
        const options = { year: 'numeric', month: 'long', day: 'numeric' };
        return new Date(dateString).toLocaleDateString('es-ES', options);
    }

    // Funci√≥n para filtrar noticias
    function filterNews(filter) {
        const allNews = [...ownNews, ...apiNews];
        
        if (filter === 'all') {
            renderNews(allNews);
        } else {
            const filtered = allNews.filter(item => item.source === filter);
            renderNews(filtered);
        }
    }

    // Funci√≥n para a√±adir nueva noticia
    function addNews(event) {
        event.preventDefault();
        
        const title = document.getElementById('news-title').value;
        const excerpt = document.getElementById('news-excerpt').value;
        const image = document.getElementById('news-image').value || 'https://images.unsplash.com/photo-1542751110-97427bbecf20?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80';
        
        const newNews = {
            id: Date.now(),
            title,
            excerpt,
            image,
            date: new Date().toISOString().split('T')[0],
            source: 'own'
        };
        
        ownNews.unshift(newNews);
        
        // Actualizar la visualizaci√≥n
        const activeFilter = document.querySelector('.filter-btn.active').dataset.filter;
        if (activeFilter === 'all' || activeFilter === 'own') {
            filterNews(activeFilter);
        }
        
        // Limpiar el formulario
        document.getElementById('news-form').reset();
        
        // Mostrar mensaje de √©xito
        alert('¬°Noticia a√±adida correctamente!');
    }

    // Variables globales
    let apiNews = [];

    // Inicializaci√≥n cuando se carga la p√°gina
    document.addEventListener('DOMContentLoaded', async function() {
        // Mostrar loading
        const container = document.getElementById('news-container');
        container.innerHTML = '<div class="loading">üîÑ Cargando noticias en tiempo real...</div>';
        
        // Cargar noticias de la API
        apiNews = await fetchNewsFromAPI();
        
        // Renderizar todas las noticias inicialmente
        renderNews([...ownNews, ...apiNews]);
        
        // Configurar filtros
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                filterNews(this.dataset.filter);
            });
        });
        
        // Configurar formulario
        document.getElementById('news-form').addEventListener('submit', addNews);
    });
</script>
    <footer>
                <p>&copy; 2024 KH Darkcore. All rights reserved.</p>
            </footer>
</body>
</html>